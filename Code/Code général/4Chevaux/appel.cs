using System;
using System.Collections.Generic;
using System.Text;
using System.Threading;

namespace _4Chevaux
{
    public struct appel
    {
        public void animation()
        {
            for (int i = 0; i < 30; i++)
            {
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("      d8888         .d8888b.  888    888 8888888888 888     888        d8888 888     888 Y88b   d88P");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("     d8P888        d88P  Y88b 888    888 888        888     888       d88888 888     888  Y88b d88P  ");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("    d8P 888        888    888 888    888 888        888     888      d88P888 888     888   Y88o88P   ");
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("   d8P  888        888        8888888888 8888888    Y88b   d88P     d88P 888 888     888    Y888P    ");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("  d88   888        888        888    888 888         Y88b d88P     d88P  888 888     888    d888b    ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("  8888888888       888    888 888    888 888          Y88o88P     d88P   888 888     888   d88888b   ");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("        888        Y88b  d88P 888    888 888           Y888P     d8888888888 Y88b. .d88P  d88P Y88b  ");
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("        888         'Y8888P'  888    888 8888888888     Y8P     d88P     888  'Y88888P'  d88P   Y88b");
                Console.ForegroundColor = ConsoleColor.White;
                Thread.Sleep(100);
                Console.Clear();
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("      d8888         .d8888b.  888    888 8888888888 888     888        d8888 888     888 Y88b   d88P");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("     d8P888        d88P  Y88b 888    888 888        888     888       d88888 888     888  Y88b d88P  ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("    d8P 888        888    888 888    888 888        888     888      d88P888 888     888   Y88o88P   ");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("   d8P  888        888        8888888888 8888888    Y88b   d88P     d88P 888 888     888    Y888P    ");
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("  d88   888        888        888    888 888         Y88b d88P     d88P  888 888     888    d888b    ");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("  8888888888       888    888 888    888 888          Y88o88P     d88P   888 888     888   d88888b   ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("        888        Y88b  d88P 888    888 888           Y888P     d8888888888 Y88b. .d88P  d88P Y88b  ");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("        888         'Y8888P'  888    888 8888888888     Y8P     d88P     888  'Y88888P'  d88P   Y88b");
                Console.ForegroundColor = ConsoleColor.White;
                Thread.Sleep(100);
                Console.Clear();
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("      d8888         .d8888b.  888    888 8888888888 888     888        d8888 888     888 Y88b   d88P");
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("     d8P888        d88P  Y88b 888    888 888        888     888       d88888 888     888  Y88b d88P  ");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("    d8P 888        888    888 888    888 888        888     888      d88P888 888     888   Y88o88P   ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("   d8P  888        888        8888888888 8888888    Y88b   d88P     d88P 888 888     888    Y888P    ");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("  d88   888        888        888    888 888         Y88b d88P     d88P  888 888     888    d888b    ");
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("  8888888888       888    888 888    888 888          Y88o88P     d88P   888 888     888   d88888b   ");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("        888        Y88b  d88P 888    888 888           Y888P     d8888888888 Y88b. .d88P  d88P Y88b  ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("        888         'Y8888P'  888    888 8888888888     Y8P     d88P     888  'Y88888P'  d88P   Y88b");
                Console.ForegroundColor = ConsoleColor.White;
                Thread.Sleep(100);
                Console.Clear();
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("      d8888         .d8888b.  888    888 8888888888 888     888        d8888 888     888 Y88b   d88P");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("     d8P888        d88P  Y88b 888    888 888        888     888       d88888 888     888  Y88b d88P  ");
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("    d8P 888        888    888 888    888 888        888     888      d88P888 888     888   Y88o88P   ");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("   d8P  888        888        8888888888 8888888    Y88b   d88P     d88P 888 888     888    Y888P    ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("  d88   888        888        888    888 888         Y88b d88P     d88P  888 888     888    d888b    ");
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("  8888888888       888    888 888    888 888          Y88o88P     d88P   888 888     888   d88888b   ");
                Console.ForegroundColor = ConsoleColor.Blue;
                Console.WriteLine("        888        Y88b  d88P 888    888 888           Y888P     d8888888888 Y88b. .d88P  d88P Y88b  ");
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("        888         'Y8888P'  888    888 8888888888     Y8P     d88P     888  'Y88888P'  d88P   Y88b");
                Console.ForegroundColor = ConsoleColor.White;
                Thread.Sleep(100);
                Console.Clear();
            }


        }

        /// <summary>
        /// Le but de ce morceau de programme est de attribuer à chaque pion en fonction du nombre de joueur, la place 0, donc la case de départ
        /// 
        /// nbrJoueur contient un entier entre 2 et 4
        /// </summary>
        /// <param name="nbrJoueur">C'est un entier qui contient le nombre de joueur</param>
        /// <param name="plateau">Plateau est un tableau résumant toutes les coordonées des pions</param>
        public void AttributionStart(int nbrJoueur, ref int[,] plateau)
        {
            for (int i = 0; i < 27 ; i++) // Attribution des pions des deux premiers joueurs à la case de départ. Pas de if car par défaut, il faut minimum 2 joueurs
            {
                for (int j = 0; j < 8; j++)
                {
                    if(i == 0)
                    {
                        plateau[j, i] = 1;
                    } else
                    {
                        plateau[j, i] = 0;  // On place le reste vide
                    }
                }
            }

            if(nbrJoueur == 3 || nbrJoueur == 4)
            {
                for (int i = 0; i < 27; i++) // Attribution des pions du troisième joueur à la case de départ.
                {
                    for (int j = 8; j < 12; j++)
                    {
                        if (i == 0)
                        {
                            plateau[j, i] = 1; // On place le cheval en première ligne
                        }
                        else
                        {
                            plateau[j, i] = 0; // On place le reste vide
                        }
                    }

                }
            }

            if (nbrJoueur == 4)
            {
                for (int i = 0; i < 27; i++) // Attribution des pions du quatrième joueur à la case de départ.
                {
                    for (int j = 12; j < 16; j++)
                    {
                        if (i == 0)
                        {
                            plateau[j, i] = 1;  // On place le cheval en première ligne
                        } else
                        {
                        plateau[j, i] = 0;  // On place le reste vide
                        }
                    }
                }
            }

        }


        /// <summary>
        /// Ce morceau de programme consisteras à convertir un tableau à deux dimensions à un string prêt à être affiché
        /// 
        /// nbrJoueur contient un entier entre 2 et 4 et plateau possède les coordonées de chaque pion
        /// </summary>
        /// <param name="nbrJoueur">C'est un entier qui contient le nombre de joueur</param>
        /// <param name="plateau">Plateau est un tableau résumant toutes les coordonées des pions</param>
        /// <param name="plateauVisuel">C'est un string comportant le plateau visuel avec les pions et les cases</param>
        public void ConvertirPlateauEnString(int nbrJoueur, int[,] plateau, out string plateauVisuel)
        {
            plateauVisuel = "PLATEAU:\n\n";
            for (int i = 0;i < 27; i++) // Mise en place de la barre au-dessus
            {
                plateauVisuel += "+-";
            }
            plateauVisuel += "+"; // Affiche le dernier coin du tableau au-dessus
            for (int i = 0; i < nbrJoueur * 4; i++) // 4 Lignes * joueurs. Cela va permettre de parcourir les lignes... RAPPEL: Une ligne est égale à un pion d'un joueur.
            {
                plateauVisuel += "\n|";
                for (int j = 0; j < 27; j++) // 27 est équivaut au nombre de cases à franchir pour gagner
                {
                    if (plateau[i, j] == 1) { // Si le nombre est égale à 1, c'est un pion, si c'est égale à 0, c'est vide
                        if(i == 0 || i == 1 || i == 2 || i == 3) // Regarde si cela concerne le joueur 1 en regardant le i qui pour rappel défini quel ligne il regarde dans plateau[]
                        {
                            plateauVisuel += "X|";
                        } else if (i == 4 || i == 5 || i == 6 || i == 7) // Regarde si cela concerne le joueur 2 en regardant le i qui pour rappel défini quel ligne il regarde dans plateau[]
                        {
                            plateauVisuel += "H|";
                        }
                        else if (i == 8 || i == 9 || i == 10 || i == 11) // Regarde si cela concerne le joueur 3 en regardant le i qui pour rappel défini quel ligne il regarde dans plateau[]
                        {
                            plateauVisuel += "O|";
                        }
                        else if (i == 12 || i == 13 || i == 14 || i == 15) // Regarde si cela concerne le joueur 4 en regardant le i qui pour rappel défini quel ligne il regarde dans plateau[]
                        {
                            plateauVisuel += "G|";
                        }
                    } else
                    {
                        plateauVisuel += " |";  // Met un espace vide si il n'y a aucun pion.
                    }
                }

            }
            plateauVisuel += "\n";
            for (int i = 0; i < 27; i++) // Mise en place de la barre en-dessous
            {
                plateauVisuel += "+-";
            }
            plateauVisuel += "+"; // Affiche le dernier coin du tableau en-dessous
        }





        /// <summary>
        /// Ce morceau de programme permet de généré un nombre au hasard entre 1 et 6 pour le dé
        /// </summary>
        /// <param name="deVisuel">C’est un string comportant un pixel art en fonction du dé</param>
        /// <param name="de">C’est un entier qui contient la valeur du dé généré au hasard</param>
        public void De(out string deVisuel, out int de)
        {
            deVisuel = "";
            pixelart mpp = new pixelart();
            de = 0;
            Random alea = new Random();
            de = alea.Next(1, 6);
            if (de == 1)
            {
                mpp.de1(ref deVisuel);
            } else if(de == 2) {
                mpp.de2(ref deVisuel);
            } else if(de == 3)
            {
                mpp.de3(ref deVisuel);
            } else if(de == 4)
            {
                mpp.de4(ref deVisuel);
            } else
            {
                mpp.de6(ref deVisuel);
            }
        }

        /// <summary>
        /// Cela vérifie en parcourant le plateau, s'il y a un gagnant
        /// 
        /// plateau contient des coordonées des pions et nbrJoueur est entre 2 et 4
        /// </summary>
        /// <param name="plateau">Plateau est un tableau résumant toutes les coordonées des pions</param>
        /// <param name="nbrJoueur">C'est un entier qui contient le nombre de joueur</param>
        /// <param name="verif">C'est un entier qui dit si oui ou non, il y a un joueur</param>
        /// <param name="gagnant">C'est un entier qui dit s'il y a un gagnant, le numéro du joueur gagnant</param>
        public void VerifWin(int[,] plateau, int nbrJoueur, out bool verif, out int gagnant)
        {
            verif = false;
            gagnant = 0;


            if (nbrJoueur == 2)
            {
                if (plateau[0, 26] == 1 && plateau[1, 26] == 1 && plateau[2, 26] == 1 && plateau[3, 26] == 1)
                {
                    verif = true;
                    gagnant = 1;
                }
                else if (plateau[4, 26] == 1 && plateau[5, 26] == 1 && plateau[6, 26] == 1 && plateau[7, 26] == 1)
                {
                    verif = true;
                    gagnant = 2;
                } else
                {
                    verif = false;
                    gagnant = 0;
                }
            } else if (nbrJoueur == 3)
            {
                if (plateau[0, 26] == 1 && plateau[1, 26] == 1 && plateau[2, 26] == 1 && plateau[3, 26] == 1)
                {
                    verif = true;
                    gagnant = 1;
                }
                else if (plateau[4, 26] == 1 && plateau[5, 26] == 1 && plateau[6, 26] == 1 && plateau[7, 26] == 1)
                {
                    verif = true;
                    gagnant = 2;
                } else if (plateau[8, 26] == 1 && plateau[9, 26] == 1 && plateau[10, 26] == 1 && plateau[11, 26] == 1)
                {
                    verif = true;
                    gagnant = 3;
                }
                else
                {
                    verif = false;
                    gagnant = 0;
                }
            } else if (nbrJoueur == 4)
            {
                if (plateau[0, 26] == 1 && plateau[1, 26] == 1 && plateau[2, 26] == 1 && plateau[3, 26] == 1)
                {
                    verif = true;
                    gagnant = 1;
                }
                else if (plateau[4, 26] == 1 && plateau[5, 26] == 1 && plateau[6, 26] == 1 && plateau[7, 26] == 1)
                {
                    verif = true;
                    gagnant = 2;
                }
                else if (plateau[8, 26] == 1 && plateau[9, 26] == 1 && plateau[10, 26] == 1 && plateau[11, 26] == 1)
                {
                    verif = true;
                    gagnant = 3;
                }
                else if (plateau[12, 26] == 1 && plateau[13, 26] == 1 && plateau[14, 26] == 1 && plateau[15, 26] == 1)
                {
                    verif = true;
                    gagnant = 4;
                }
                else
                {
                    verif = false;
                    gagnant = 0;
                }
            }







        }

        /// <summary>
        /// S'occupe du déplacement du joueur en fonction du dé et du pion choisit
        /// 
        /// pion, de, player, nbrJoueur possèdent tous une valeur
        /// plateau possède les coordonées des joueurs
        /// </summary>
        /// <param name="plateau">Plateau est un tableau résumant toutes les coordonées des pions</param>
        /// <param name="nbrJoueur">C’est un entier qui contient le nombre de joueur</param>
        /// <param name="pion">C'est un entier qui permet de dire il s'agit de quel pion</param>
        /// <param name="player">C'est un entier qui permet de dire il s'agit de quel joueur</param>
        /// <param name="de">C'est un entier qui dit le nombre du dé</param>
        public void DeplacementPion(ref int[,] plateau, int nbrJoueur, int pion, int player, int de)
        {
            bool piontrouver;
            piontrouver = false;
            int i;
            i = 0;

            if (player == 1)
            {
                if(pion == 1)
                {
                    do
                    {
                        if (plateau[0, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[0, i] = 0;
                                plateau[0, 26] = 1;
                            } else
                            {
                                plateau[0, i] = 0;
                                plateau[0, i + de] = 1;
                            }
                        } else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                } else if(pion == 2)
                {
                    do
                    {
                        if (plateau[1, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[1, i] = 0;
                                plateau[1, 26] = 1;
                            }
                            else
                            {
                                plateau[1, i] = 0;
                                plateau[1, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                } else if(pion == 3)
                {
                    do
                    {
                        if (plateau[2, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[2, i] = 0;
                                plateau[2, 26] = 1;
                            }
                            else
                            {
                                plateau[2, i] = 0;
                                plateau[2, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                } else if(pion == 4)
                {
                    do
                    {
                        if (plateau[3, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[3, i] = 0;
                                plateau[3, 26] = 1;
                            }
                            else
                            {
                                plateau[3, i] = 0;
                                plateau[3, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
            } else if (player == 2)
            {
                if (pion == 1)
                {
                    do
                    {
                        if (plateau[4, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[4, i] = 0;
                                plateau[4, 26] = 1;
                            }
                            else
                            {
                                plateau[4, i] = 0;
                                plateau[4, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 2)
                {
                    do
                    {
                        if (plateau[5, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[5, i] = 0;
                                plateau[5, 26] = 1;
                            }
                            else
                            {
                                plateau[5, i] = 0;
                                plateau[5, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 3)
                {
                    do
                    {
                        if (plateau[6, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[6, i] = 0;
                                plateau[6, 26] = 1;
                            }
                            else
                            {
                                plateau[6, i] = 0;
                                plateau[6, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 4)
                {
                    do
                    {
                        if (plateau[7, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[7, i] = 0;
                                plateau[7, 26] = 1;
                            }
                            else
                            {
                                plateau[7, i] = 0;
                                plateau[7, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
            } else if (player == 3)
            {
                if (pion == 1)
                {
                    do
                    {
                        if (plateau[8, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[8, i] = 0;
                                plateau[8, 26] = 1;
                            }
                            else
                            {
                                plateau[8, i] = 0;
                                plateau[8, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 2)
                {
                    do
                    {
                        if (plateau[9, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[9, i] = 0;
                                plateau[9, 26] = 1;
                            }
                            else
                            {
                                plateau[9, i] = 0;
                                plateau[9, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 3)
                {
                    do
                    {
                        if (plateau[10, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[10, i] = 0;
                                plateau[10, 26] = 1;
                            }
                            else
                            {
                                plateau[10, i] = 0;
                                plateau[10, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 4)
                {
                    do
                    {
                        if (plateau[11, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[11, i] = 0;
                                plateau[11, 26] = 1;
                            }
                            else
                            {
                                plateau[11, i] = 0;
                                plateau[11, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
            } else
            {
                if (pion == 1)
                {
                    do
                    {
                        if (plateau[12, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[12, i] = 0;
                                plateau[12, 26] = 1;
                            }
                            else
                            {
                                plateau[12, i] = 0;
                                plateau[12, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 2)
                {
                    do
                    {
                        if (plateau[13, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[13, i] = 0;
                                plateau[13, 26] = 1;
                            }
                            else
                            {
                                plateau[13, i] = 0;
                                plateau[13, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 3)
                {
                    do
                    {
                        if (plateau[14, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[14, i] = 0;
                                plateau[14, 26] = 1;
                            }
                            else
                            {
                                plateau[14, i] = 0;
                                plateau[14, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
                else if (pion == 4)
                {
                    do
                    {
                        if (plateau[15, i] == 1)
                        {
                            piontrouver = true;
                            if (i + de > 26)
                            {
                                plateau[15, i] = 0;
                                plateau[15, 26] = 1;
                            }
                            else
                            {
                                plateau[15, i] = 0;
                                plateau[15, i + de] = 1;
                            }
                        }
                        else
                        {
                            i++;
                        }
                    } while (piontrouver == false);
                }
            }




        }


    }
}


